name: Tag

on:
  # workflow_dispatch:
  #     inputs:
  #       stage:
  #         description: 'Beta or Production release'
  #         required: true
  #         default: 'beta'
  #       tag:
  #         description: 'Release tag to build'  
  #         required: true
  push: 
    branches:
      - "ci-setup"
  
jobs:
  create-tag:
    name: Create tag
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Get tag version
        id: tag_version
        uses: wei/curl@master
        with:
          args: -H "Accept: application/vnd.github.v3+json" -H "Authorization: token $AUTH_TOKEN" $GITHUB_API_URL/repos/$GITHUB_REPOSITORY/tags
        env:
          AUTH_TOKEN: ${{ secrets.CI_GITHUB_PERSONAL_ACCESS_TOKEN }}
      - name: tag output
        run: echo "${{ steps.tag_version.outputs.new_tag }}"